{"version":3,"file":"timepicker.component.d.ts","sources":["../../../../../projects/ng-uikit-pro-standard/src/lib/pro/time-picker/timepicker.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  AfterContentChecked,\r\n  AfterViewInit,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Inject,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  PLATFORM_ID,\r\n  Renderer2,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  NgZone,\r\n  HostListener,\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common';\r\n\r\nexport const TIME_PIRCKER_VALUE_ACCESSOT: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  // tslint:disable-next-line: no-use-before-declare\r\n  useExisting: forwardRef(() => ClockPickerComponent),\r\n  multi: true,\r\n};\r\n\r\n@Component({\r\n  selector: 'mdb-time-picker',\r\n  templateUrl: './timepicker.component.html',\r\n  styleUrls: ['./time-picker-module.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [TIME_PIRCKER_VALUE_ACCESSOT],\r\n})\r\nexport class ClockPickerComponent\r\n  implements OnInit, AfterViewInit, ControlValueAccessor, AfterContentChecked {\r\n  @ViewChild('hoursPlate', { static: true }) public hoursPlate: ElementRef;\r\n  @ViewChild('minutesPlate', { static: true }) public minutesPlate: ElementRef;\r\n\r\n  @ViewChild('plate', { static: true }) public plate: ElementRef;\r\n  @ViewChild('svg', { static: true }) public svg: ElementRef;\r\n  @ViewChild('g', { static: true }) public g: ElementRef;\r\n  @ViewChild('hand', { static: true }) public hand: ElementRef;\r\n  @ViewChild('fg', { static: true }) public fg: ElementRef;\r\n  @ViewChild('bg', { static: true }) public bg: ElementRef;\r\n  @ViewChild('bearing', { static: true }) public bearing: ElementRef;\r\n\r\n  @Input() twelvehour = false;\r\n  @Input() darktheme = false;\r\n  @Input() placeholder: String = '';\r\n  @Input() label = '';\r\n  @Input() duration = 300;\r\n  @Input() showClock = false;\r\n  @Input() buttonLabel = 'Done';\r\n  @Input() buttonClear = true;\r\n  @Input() buttonClose = false;\r\n  @Input() buttonClearLabel = 'Clear';\r\n  @Input() buttonCloseLabel = 'Close';\r\n  @Input() disabled = false;\r\n  @Input() tabIndex: any;\r\n  @Input() outlineInput = false;\r\n  @Input() openOnFocus = true;\r\n  @Input() readonly = false;\r\n  @Input() ampmClass = '';\r\n  @Input() footerClass = '';\r\n  @Output() timeChanged: EventEmitter<string> = new EventEmitter<string>();\r\n  isOpen = false;\r\n  isMobile: any = null;\r\n  touchDevice = 'ontouchstart' in (document.documentElement as any);\r\n  showHours = false;\r\n  moveEvent: string;\r\n  tapEvent: string;\r\n\r\n  public elements = document.getElementsByClassName('clockpicker');\r\n  public elementNumber: any;\r\n\r\n  dialRadius = 135;\r\n  outerRadius = 110;\r\n  innerRadius = 80;\r\n  tickRadius = 20;\r\n  diameter = this.dialRadius * 2;\r\n  isBrowser: any = false;\r\n\r\n  hoursTicks: any = [];\r\n  minutesTicks: any = [];\r\n  selectedHours: any = { h: '12', m: '00', ampm: 'AM' };\r\n  endHours = '';\r\n\r\n  touchSupported: any = 'ontouchstart' in window;\r\n  mousedownEvent: any = 'mousedown' + (this.touchSupported ? ' touchstart' : '');\r\n  mousemoveEvent: any = 'mousemove' + (this.touchSupported ? ' touchmove' : '');\r\n  mouseupEvent: any = 'mouseup' + (this.touchSupported ? ' touchend' : '');\r\n  isMouseDown = false;\r\n  documentClickFun: Function;\r\n  constructor(\r\n    public elem: ElementRef,\r\n    public renderer: Renderer2,\r\n    private _cdRef: ChangeDetectorRef,\r\n    private _ngZone: NgZone,\r\n    @Inject(DOCUMENT) private _document: any,\r\n    @Inject(PLATFORM_ID) platformId: string\r\n  ) {\r\n    this.isBrowser = isPlatformBrowser(platformId);\r\n    renderer.listen(this.elem.nativeElement, 'click', (event: any) => {\r\n      if (\r\n        this.showClock &&\r\n        event.target &&\r\n        this.elem.nativeElement !== event.target &&\r\n        !this.elem.nativeElement.contains(event.target)\r\n      ) {\r\n        this.showClock = false;\r\n      }\r\n      if (event.target.classList.contains('picker__holder')) {\r\n        this.showClock = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  @HostListener('touchmove', ['$event']) ontouchmove(event: any) {\r\n    this.mousedown(event);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.generateTick();\r\n    if (this.isBrowser) {\r\n      this.isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n    }\r\n\r\n    this.isOpen = this.showClock;\r\n    this._handleOutsideClick();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    ['mousedown', 'mouseup'].forEach((event: any) => {\r\n      this.renderer.listen(\r\n        this.elem.nativeElement.querySelector('.clockpicker-plate'),\r\n        event,\r\n        (ev: any) => {\r\n          if (event === 'mousedown') {\r\n            this.mousedown(ev, false);\r\n            this.isMouseDown = true;\r\n          } else {\r\n            this.isMouseDown = false;\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  ngAfterContentChecked() {\r\n    if (this.isBrowser) {\r\n      // Fix for visible date / time picker input when picker plate is visible.\r\n      try {\r\n        const openedPicker: any = document.querySelector('.picker--opened');\r\n        const allPickers: any = document.querySelectorAll('.picker');\r\n        allPickers.forEach((element: any) => {\r\n          this.renderer.setStyle(element, 'z-index', '0');\r\n        });\r\n        this.renderer.setStyle(openedPicker, 'z-index', '1000');\r\n      } catch (error) {}\r\n    }\r\n  }\r\n\r\n  checkDraw() {\r\n    let value;\r\n    const isHours = this.showHours;\r\n    if (isHours) {\r\n      value = parseInt(this.selectedHours.h, 0);\r\n    } else {\r\n      value = parseInt(this.selectedHours.m, 0);\r\n    }\r\n\r\n    const unit = Math.PI / (isHours ? 6 : 30),\r\n      radian = value * unit,\r\n      radius = isHours && value > 0 && value < 13 ? this.innerRadius : this.outerRadius,\r\n      xd = Math.sin(radian) * radius,\r\n      yd = -Math.cos(radian) * radius;\r\n    this.setHand(xd, yd, false);\r\n  }\r\n\r\n  mousedown(e: any, space?: any) {\r\n    const offset = this.plate.nativeElement.getBoundingClientRect(),\r\n      isTouch = /^touch/.test(e.type),\r\n      x0 = offset.left + this.dialRadius,\r\n      y0 = offset.top + this.dialRadius,\r\n      dx = (isTouch ? e.touches[0] : e).clientX - x0,\r\n      dy = (isTouch ? e.touches[0] : e).clientY - y0,\r\n      z = Math.sqrt(dx * dx + dy * dy);\r\n    let moved = false;\r\n\r\n    if (\r\n      space &&\r\n      (z < this.outerRadius - this.tickRadius || z > this.outerRadius + this.tickRadius)\r\n    ) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    if (this.showHours) {\r\n      this.setHand(dx, dy, true);\r\n    } else {\r\n      this.setHand(dx, dy, false);\r\n    }\r\n\r\n    const mousemoveEventMethod = (event: any) => {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      const x = event.clientX - x0,\r\n        y = event.clientY - y0;\r\n      if (!moved && x === dx && y === dy) {\r\n        return;\r\n      }\r\n      moved = true;\r\n\r\n      this._ngZone.run(() => {\r\n        this.setHand(x, y, false);\r\n      });\r\n    };\r\n\r\n    const mouseupEventMethod = (event: any) => {\r\n      this._document.removeEventListener(this.mousemoveEvent, mousemoveEventMethod);\r\n      e.preventDefault();\r\n      const x = event.clientX - x0,\r\n        y = event.clientX - y0;\r\n      if ((space || moved) && x === dx && y === dy) {\r\n        this.setHand(x, y, false);\r\n      }\r\n      this.showMinutesClock();\r\n      this._document.removeEventListener(this.mouseupEvent, mouseupEventMethod);\r\n    };\r\n\r\n    this._ngZone.runOutsideAngular(() => {\r\n      this._document.addEventListener(this.mousemoveEvent, mousemoveEventMethod);\r\n      this._document.addEventListener(this.mouseupEvent, mouseupEventMethod);\r\n    });\r\n  }\r\n\r\n  hideKeyboard() {\r\n    // this set timeout needed for case when hideKeyborad\r\n    // is called inside of 'onfocus' event handler\r\n    try {\r\n      setTimeout(() => {\r\n        // creating temp field\r\n        const field = this.renderer.createElement('input');\r\n        this.renderer.appendChild(this.elem.nativeElement, field);\r\n        const inputReference = this.elem.nativeElement.lastElementChild;\r\n        this.renderer.setAttribute(inputReference, 'type', 'text');\r\n        this.renderer.setAttribute(inputReference, 'type', 'text');\r\n        this.renderer.setStyle(inputReference, 'opacity', '0');\r\n        this.renderer.setStyle(inputReference, '-webkit-user-modify', 'read-write-plaintext-only');\r\n        // // hiding temp field from peoples eyes\r\n        // // -webkit-user-modify is nessesary for Android 4.x\r\n        // adding onfocus event handler for out temp field\r\n        field.onfocus = () => {\r\n          // this timeout of 200ms is nessasary for Android 2.3.x\r\n          setTimeout(() => {\r\n            this.renderer.setStyle(field, 'display', 'none');\r\n            setTimeout(() => {\r\n              this.renderer.removeChild(this.elem.nativeElement, field);\r\n              document.body.focus();\r\n            }, 0);\r\n          }, 0);\r\n        };\r\n        // focusing it\r\n        field.focus();\r\n      }, 0);\r\n    } catch (error) {}\r\n  }\r\n\r\n  onFocusInput(): void {\r\n    if (this.openOnFocus && !this.isOpen) {\r\n      this.openBtnClicked();\r\n    }\r\n  }\r\n\r\n  openBtnClicked(): void {\r\n    this.isOpen = true;\r\n    this.showClock = true;\r\n    this.showHours = true;\r\n    this.checkDraw();\r\n    if (this.isMobile) {\r\n      this.hideKeyboard();\r\n    }\r\n    this._handleOutsideClick();\r\n    this._cdRef.markForCheck();\r\n  }\r\n\r\n  private _handleOutsideClick() {\r\n    const pickerHolder = this.elem.nativeElement.querySelector('.picker__holder');\r\n    this.documentClickFun = this.renderer.listen(pickerHolder, 'click', (event: any) => {\r\n      const wrapper = this.elem.nativeElement.querySelector('.picker__wrap');\r\n\r\n      if (this.isOpen && !wrapper.contains(event.target)) {\r\n        this.close();\r\n      }\r\n    });\r\n  }\r\n\r\n  closeBtnClicked() {\r\n    this.isOpen = false;\r\n    const h = this.selectedHours.h;\r\n    const m = this.selectedHours.m;\r\n    const ampm = this.selectedHours.ampm;\r\n\r\n    if (this.twelvehour) {\r\n      this.endHours = h + ':' + m + ampm;\r\n    } else {\r\n      this.endHours = h + ':' + m;\r\n    }\r\n    this.onChangeCb(this.endHours);\r\n    this.onTouchedCb();\r\n    this.timeChanged.emit(this.endHours);\r\n    this.showClock = false;\r\n\r\n    if (this.documentClickFun) {\r\n      this.documentClickFun();\r\n    }\r\n    this._cdRef.markForCheck();\r\n  }\r\n\r\n  close() {\r\n    this.isOpen = false;\r\n    this.showClock = false;\r\n    this.onTouchedCb();\r\n\r\n    if (this.documentClickFun) {\r\n      this.documentClickFun();\r\n    }\r\n\r\n    this._cdRef.markForCheck();\r\n  }\r\n\r\n  clearTimeInput() {\r\n    this.selectedHours = { h: '12', m: '00', ampm: 'AM' };\r\n    this.endHours = '';\r\n    this._cdRef.markForCheck();\r\n    this.onChangeCb(this.endHours);\r\n    this.onTouchedCb();\r\n    this.timeChanged.emit(this.endHours);\r\n  }\r\n\r\n  setHour(hour: String) {\r\n    this.selectedHours.h = hour;\r\n  }\r\n\r\n  setMinute(min: String) {\r\n    this.selectedHours.m = min;\r\n  }\r\n\r\n  setAmPm(ampm: String) {\r\n    this.selectedHours.ampm = ampm;\r\n  }\r\n\r\n  showHoursClock() {\r\n    this.showHours = true;\r\n    this.checkDraw();\r\n  }\r\n\r\n  showMinutesClock() {\r\n    this.showHours = false;\r\n    this.checkDraw();\r\n  }\r\n\r\n  generateTick() {\r\n    if (this.twelvehour) {\r\n      for (let i = 1; i < 13; i++) {\r\n        const radian = (i / 6) * Math.PI;\r\n        const radius = this.outerRadius;\r\n\r\n        const tick = {\r\n          hour: i,\r\n          left: this.dialRadius + Math.sin(radian) * radius - this.tickRadius,\r\n          top: this.dialRadius - Math.cos(radian) * radius - this.tickRadius,\r\n        };\r\n        this.hoursTicks.push(tick);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < 24; i++) {\r\n        const radian = (i / 6) * Math.PI;\r\n        const inner = i > 0 && i < 13;\r\n        const radius = inner ? this.innerRadius : this.outerRadius;\r\n        let h;\r\n\r\n        if (i === 0) {\r\n          h = '0' + i.toString();\r\n        } else {\r\n          h = i;\r\n        }\r\n\r\n        const tick = {\r\n          hour: h,\r\n          left: this.dialRadius + Math.sin(radian) * radius - this.tickRadius,\r\n          top: this.dialRadius - Math.cos(radian) * radius - this.tickRadius,\r\n        };\r\n        this.hoursTicks.push(tick);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < 60; i += 5) {\r\n      const radian = (i / 30) * Math.PI;\r\n      let min = i.toString();\r\n      if (i < 10) {\r\n        min = '0' + i.toString();\r\n      }\r\n      const tick = {\r\n        min: min,\r\n        left: this.dialRadius + Math.sin(radian) * this.outerRadius - this.tickRadius,\r\n        top: this.dialRadius - Math.cos(radian) * this.outerRadius - this.tickRadius,\r\n      };\r\n      this.minutesTicks.push(tick);\r\n    }\r\n  }\r\n\r\n  setHand(x: any, y: any, roundBy5: any) {\r\n    let radian = Math.atan2(x, -y);\r\n    const isHours = this.showHours;\r\n    const unit = Math.PI / (isHours || roundBy5 ? 6 : 30);\r\n    const z = Math.sqrt(x * x + y * y);\r\n    const inner = isHours && z < (this.outerRadius + this.innerRadius) / 2;\r\n    let radius = inner ? this.innerRadius : this.outerRadius;\r\n    let value;\r\n\r\n    if (this.showHours) {\r\n      value = parseInt(this.selectedHours.h, 0);\r\n    } else {\r\n      value = parseInt(this.selectedHours.m, 0);\r\n    }\r\n\r\n    if (this.twelvehour) {\r\n      radius = this.outerRadius;\r\n    }\r\n\r\n    if (radian < 0) {\r\n      radian = Math.PI * 2 + radian;\r\n    }\r\n\r\n    value = Math.round(radian / unit);\r\n    radian = value * unit;\r\n\r\n    if (this.twelvehour) {\r\n      if (isHours) {\r\n        if (value === 0) {\r\n          value = 12;\r\n        }\r\n      } else {\r\n        if (roundBy5) {\r\n          value *= 5;\r\n        }\r\n        if (value === 60) {\r\n          value = 0;\r\n        }\r\n      }\r\n    } else {\r\n      if (isHours) {\r\n        value = !inner ? value + 12 : value;\r\n        value = value === 24 ? 0 : value;\r\n        value = inner && value === 0 ? 12 : value;\r\n        value = !inner && value === 12 ? 0 : value;\r\n      } else {\r\n        if (roundBy5) {\r\n          value *= 5;\r\n        }\r\n        if (value === 60) {\r\n          value = 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isHours) {\r\n      this.fg.nativeElement.setAttribute('class', 'clockpicker-canvas-fg');\r\n    } else {\r\n      if (value % 5 === 0) {\r\n        this.fg.nativeElement.setAttribute('class', 'clockpicker-canvas-fg');\r\n      } else {\r\n        this.fg.nativeElement.setAttribute('class', 'clockpicker-canvas-fg active');\r\n      }\r\n    }\r\n\r\n    const cx1 = Math.sin(radian) * (radius - this.tickRadius),\r\n      cy1 = -Math.cos(radian) * (radius - this.tickRadius),\r\n      cx2 = Math.sin(radian) * radius,\r\n      cy2 = -Math.cos(radian) * radius;\r\n\r\n    this.hand.nativeElement.setAttribute('x2', cx1);\r\n    this.hand.nativeElement.setAttribute('y2', cy1);\r\n    this.bg.nativeElement.setAttribute('cx', cx2);\r\n    this.bg.nativeElement.setAttribute('cy', cy2);\r\n    this.fg.nativeElement.setAttribute('cx', cx2);\r\n    this.fg.nativeElement.setAttribute('cy', cy2);\r\n\r\n    if (this.showHours) {\r\n      if (value < 10) {\r\n        this.setHour('0' + value.toString());\r\n      } else {\r\n        this.setHour(value.toString());\r\n      }\r\n    } else {\r\n      if (value < 10) {\r\n        this.setMinute('0' + value.toString());\r\n      } else {\r\n        this.setMinute(value.toString());\r\n      }\r\n    }\r\n\r\n    this._cdRef.markForCheck();\r\n  }\r\n\r\n  offset(obj: any) {\r\n    let left = 0,\r\n      top = 0;\r\n\r\n    if (obj.offsetParent) {\r\n      do {\r\n        left += obj.offsetLeft;\r\n        top += obj.offsetTop;\r\n      } while ((obj = obj.offsetParent));\r\n    }\r\n    return { left, top };\r\n  }\r\n\r\n  private _getFormattedTime(value: string) {\r\n    const timeArr = value.split(':');\r\n    const minutesVal = timeArr[1];\r\n\r\n    const h = timeArr[0];\r\n    const m = minutesVal.slice(0, 2);\r\n    const ampm = minutesVal.length > 2 ? minutesVal.slice(-2) : '';\r\n\r\n    return { h, m, ampm };\r\n  }\r\n\r\n  onChangeCb: (_: any) => void = () => {};\r\n  onTouchedCb: () => void = () => {};\r\n\r\n  writeValue(value: any): void {\r\n    if (value) {\r\n      this.showHours = true;\r\n      const time = this._getFormattedTime(value);\r\n      this.setHour(time.h);\r\n      this.setMinute(time.m);\r\n      this.setAmPm(time.ampm);\r\n\r\n      this.endHours = value;\r\n    } else {\r\n      this.clearTimeInput();\r\n    }\r\n\r\n    this._cdRef.markForCheck();\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.onChangeCb = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouchedCb = fn;\r\n  }\r\n}\r\n"]}