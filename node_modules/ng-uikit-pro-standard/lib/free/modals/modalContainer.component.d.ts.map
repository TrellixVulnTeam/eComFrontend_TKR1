{"version":3,"file":"modalContainer.component.d.ts","sources":["../../../../../projects/ng-uikit-pro-standard/src/lib/free/modals/modalContainer.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAEL,UAAU,EAEV,SAAS,EACT,MAAM,EACN,SAAS,EAGV,MAAM,eAAe,CAAC;AACvB,OAAO,EAA8B,YAAY,EAAuB,MAAM,iBAAiB,CAAC;;AAIhG,qBAMa,uBAAwB,YAAW,MAAM,EAAE,SAAS;AACjE,IAmCkE,OAAO,CAAC,SAAS;AAAE,IAnCnF,UAAU,SAAW;AACvB,IAA2B,QAAQ,SAAM;AACzC,IAA4B,IAAI,SAAY;AAC5C,IAA8B,KAAK,UAAQ;AAC3C,IACE,OAAO,CAAC,eAAe,CAAkB;AAC3C,IACS,MAAM,EAAE,YAAY,CAAC;AAC9B,IAAS,OAAO,UAAS;AACzB,IAAS,KAAK,EAAE,MAAM,CAAC;AACvB,IAAS,UAAU,EAAE,OAAO,CAAC;AAC7B,IAAE,SAAS,CAAC,QAAQ,EAAE,UAAU,CAAC;AACjC,IAAE,OAAO,CAAC,aAAa,CAAS;AAChC,IAES,OAAO,CAAC,KAAK,EAAE,GAAG,GAAG,IAAI;AAAE,IAa3B,KAAK,IAAI,IAAI;AAAE,gBAOH,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,UAAU,EAAU,SAAS,EAAE,SAAS;AAAG,IAO/F,QAAQ,IAAI,IAAI;AAAE,IAiDlB,iBAAiB;AACd,IAKH,oBAAoB;AACjB,IAUH,WAAW,IAAI,IAAI;AAAE,IAMrB,IAAI,IAAI,IAAI;;;AAAE,CAmCf;AACD","sourcesContent":["import {\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  HostBinding,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { ClassName, DISMISS_REASONS, ModalOptions, TransitionDurations } from './modal.options';\nimport { isBs3 } from '../utils/ng2-bootstrap-config';\nimport { MDBModalService } from './modal.service';\n\n@Component({\n  selector: 'mdb-modal-container',\n  templateUrl: 'modalContainer.component.html',\n  styleUrls: ['./modals-module.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class ModalContainerComponent implements OnInit, OnDestroy {\n  modalClass = 'modal';\n  @HostBinding('tabindex') tabindex = -1;\n  @HostBinding('attr.role') role = 'dialog';\n  @HostBinding('class.modal') modal = true;\n\n  private mdbModalService: MDBModalService;\n\n  public config: ModalOptions;\n  public isShown = false;\n  public level: number;\n  public isAnimated: boolean;\n  protected _element: ElementRef;\n  private isModalHiding = false;\n\n  @HostListener('click', ['$event'])\n  public onClick(event: any): void {\n    if (\n      this.config.ignoreBackdropClick ||\n      this.config.backdrop === 'static' ||\n      event.target !== this._element.nativeElement\n    ) {\n      return;\n    }\n    this.mdbModalService.setDismissReason(DISMISS_REASONS.BACKRDOP);\n    this.hide();\n  }\n\n  @HostListener('window:keydown.esc')\n  public onEsc(): void {\n    if (this.config.keyboard && this.level === this.mdbModalService.getModalsCount()) {\n      this.mdbModalService.setDismissReason(DISMISS_REASONS.ESC);\n      this.hide();\n    }\n  }\n\n  public constructor(options: ModalOptions, _element: ElementRef, private _renderer: Renderer2) {\n    // this.mdbModalService = msConfig.serviceInstance;\n\n    this._element = _element;\n    this.config = Object.assign({}, options);\n  }\n\n  ngOnInit(): void {\n    if (this.config.animated) {\n      this._renderer.addClass(this._element.nativeElement, 'fade');\n    }\n    this._renderer.setStyle(this._element.nativeElement, 'display', 'block');\n    if (\n      (window &&\n        window.navigator.userAgent.indexOf('Edge') !== -1 &&\n        this.config &&\n        this.config.toString().indexOf('side-modal') === -1) ||\n      (window &&\n        window.navigator.userAgent.indexOf('Edge') !== -1 &&\n        this.config &&\n        this.config.toString().indexOf('modal-full-height') === -1)\n    ) {\n      this.isShown = true;\n      this._renderer.addClass(this._element.nativeElement, isBs3() ? ClassName.IN : ClassName.SHOW);\n      this._renderer.setStyle(this._element.nativeElement, 'transition', 'transform 0.3s ease-out');\n      this._renderer.setStyle(this._element.nativeElement, 'transform', 'translate(0, 25px)');\n    } else {\n      setTimeout(\n        () => {\n          this.isShown = true;\n          this._renderer.addClass(\n            this._element.nativeElement,\n            isBs3() ? ClassName.IN : ClassName.SHOW\n          );\n        },\n        this.isAnimated ? TransitionDurations.BACKDROP : 0\n      );\n    }\n\n    if (document && document.body) {\n      if (this.mdbModalService.getModalsCount() === 1) {\n        this.mdbModalService.checkScrollbar();\n        this.mdbModalService.setScrollbar();\n      }\n      this._renderer.addClass(document.body, ClassName.OPEN);\n    }\n\n    if (this.config.containerClass) {\n      this.updateContainerClass();\n    }\n\n    if (this.config.scroll) {\n      this._renderer.setStyle(this._element.nativeElement, 'overflow-y', 'auto');\n    }\n  }\n\n  focusModalElement() {\n    if (this.config.focus) {\n      this._element.nativeElement.focus();\n    }\n  }\n\n  updateContainerClass() {\n    if (this.config.containerClass) {\n      const containerClasses = this.config.containerClass;\n      const classArr = containerClasses.split(' ');\n\n      for (let i = 0; i < classArr.length; i++) {\n        this._renderer.addClass(this._element.nativeElement, classArr[i]);\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.isShown) {\n      this.hide();\n    }\n  }\n\n  hide(): void {\n    if (this.isModalHiding || !this.isShown) {\n      return;\n    }\n    this.isModalHiding = true;\n    this._renderer.removeClass(\n      this._element.nativeElement,\n      isBs3() ? ClassName.IN : ClassName.SHOW\n    );\n\n    // fix(modal): resolved problem with not pausing iframe/video when closing modal\n    const iframeElements = Array.from(this._element.nativeElement.querySelectorAll('iframe'));\n    const videoElements = Array.from(this._element.nativeElement.querySelectorAll('video'));\n\n    iframeElements.forEach((iframe: HTMLIFrameElement) => {\n      const srcAttribute: any = iframe.getAttribute('src');\n      this._renderer.setAttribute(iframe, 'src', srcAttribute);\n    });\n\n    videoElements.forEach((video: HTMLVideoElement) => {\n      video.pause();\n    });\n\n    setTimeout(\n      () => {\n        this.isShown = false;\n        if (document && document.body && this.mdbModalService.getModalsCount() === 1) {\n          this._renderer.removeClass(document.body, ClassName.OPEN);\n        }\n        this.mdbModalService.hide(this.level);\n        this.isModalHiding = false;\n      },\n      this.isAnimated ? TransitionDurations.MODAL : 0\n    );\n  }\n}\n"]}